<odoo>
  <!-- Heredar el form de permisos.modulo para añadir Menús, Grupo y Dirty -->
  <!-- permisos/views/permisos_views_menuids.xml -->
  <record id="view_permisos_modulo_form_inherit_menus" model="ir.ui.view">
    <field name="name">permisos.modulo.form.menus</field>
    <field name="model">permisos.modulo</field>
    <field name="inherit_id" ref="permisos.view_permisos_modulo_form"/>
    <field name="arch" type="xml">
      <!-- Insertar un notebook con pestañas debajo del group existente -->
      <xpath expr="//form/sheet" position="inside">
        <group>
          <field name="group_id" readonly="1" string="Grupo del área"/>
          <field name="dirty" readonly="1"/>
        </group>
        <notebook>
          <page string="Menús del módulo">
              <field name="menu_ids" string="Menús del módulo" widget="many2many_tags"
                     options="{'no_create': True, 'no_open': False}"/>
              <div class="o_form_label">
                Tip: agrega también submenús; la sincronización no hace cascada automática.
                
              </div>
          </page>

          <page string="Grupos de Seguridad" name="groups">
              <group>
                  <field name="group_id" readonly="1"/>
                  <field name="group_read_id" readonly="1"/>
                  <field name="group_write_id" readonly="1"/>
                  <field name="group_create_id" readonly="1"/>
                  <field name="group_admin_id" readonly="1"/>
              </group>
          </page>
        </notebook>
      </xpath>
    </field>
  </record>

  <!-- Opcional: heredar la lista para ver la bandera 'dirty' -->
  <record id="view_permisos_modulo_list_inherit_dirty" model="ir.ui.view">
    <field name="name">permisos.modulo.list.dirty</field>
    <field name="model">permisos.modulo</field>
    <field name="inherit_id" ref="permisos.view_permisos_modulo_list"/>
    <field name="arch" type="xml">
      <xpath expr="//list" position="inside">
        <field name="dirty" readonly="1"/>
        <!--string="Pendiente aplicar" widget="web_ribbon" invisible="not dirty" bg_color="bg-warning"-->
      </xpath>
    </field>
  </record>
</odoo>
