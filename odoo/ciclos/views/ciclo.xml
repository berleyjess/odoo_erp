<odoo>
    <!-- Acción de Menú (DEBE IR PRIMERO) -->
    <record id="action_ciclos" model="ir.actions.act_window">
        <field name="name">Ciclos Agrícolas</field>
        <field name="res_model">ciclos.ciclo</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'default_periodo': 'OI'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Añade un Ciclo Agríciola</p>
        </field>
    </record>

    <!-- Vista árbol -->
    <record id="view_ciclo_list" model="ir.ui.view">
        <field name="name">ciclos.list</field>
        <field name="model">ciclos.ciclo</field>
        <field name="arch" type="xml">
            <list>
                <field name="label" width="25%"/>
                <field name="periodo" width="25%"/>
                <field name="finicio" width="25%"/>
                <field name="ffinal" width="25%"/>
            </list>
        </field>
    </record>

    <!-- Vista formulario -->
    <record id="view_ciclo_form" model="ir.ui.view">
        <field name="name">ciclos.form</field>
        <field name="model">ciclos.ciclo</field>
        <field name="arch" type="xml">
            <form autosave="False">
             <header>
              <button name="action_back_to_list" string="Volver" type="object" class="btn btn-secondary" icon="fa-arrow-left"/>
             </header>
                <sheet>
                    <group>
                        <field name="periodo" autofocus="autofocus"/>
                        <field name="finicio"/>
                        <field name="ffinal"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    <!-- FORM SOLO LECTURA + Botón Editar -->
    <record id="view_ciclo_form_ro" model="ir.ui.view">
        <field name="name">ciclos.form.readonly</field>
        <field name="model">ciclos.ciclo</field>
        <field name="arch" type="xml">
            <form string="Ciclo" edit="false" create="false" delete="false">
                <header>
                    <button name="action_open_edit" type="object" string="Editar" class="btn-primary" />
                    <button name="%(ciclos.action_ciclos)d" type="action" string="Volver" class="btn-secondary"/>
                </header>
                <sheet>
                    <group>
                        <field name="periodo" readonly="1"/>
                        <field name="finicio" readonly="1"/>
                        <field name="ffinal" readonly="1"/>
                        <field name="label" readonly="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Bindings para que el FORM por defecto sea el de solo lectura -->
    <record id="action_ciclos_list_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="10"/>
        <field name="view_mode">list</field>
        <field name="view_id" ref="view_ciclo_list"/>
        <field name="act_window_id" ref="action_ciclos"/>
    </record>

    <record id="action_ciclos_form_ro" model="ir.actions.act_window.view">
        <field name="sequence" eval="20"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_ciclo_form_ro"/>
        <field name="act_window_id" ref="action_ciclos"/>
    </record>

    <!-- Menús -->
    <menuitem id="menu_root" name="ciclos" sequence="10" />
    <menuitem id="menu_action" name="Ciclos Agrícolas" parent="menu_root" action="action_ciclos" groups="base.group_user"/>
</odoo>
